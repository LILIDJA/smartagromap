<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nouvelle parcelle - SmartAgroMap</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --agro-green: #27ae60;
            --agro-light: #2ecc71;
            --agro-dark: #16a085;
            --agro-sand: #f1c40f;
            --agro-earth: #8b4513;
            --agro-sky: #3498db;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            color: #2c3e50;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        /* HEADER */
        .header {
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 25px;
            margin-bottom: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border-bottom: 8px solid var(--agro-green);
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .logo-icon {
            font-size: 4rem;
            color: var(--agro-green);
        }
        
        .logo-text h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(45deg, var(--agro-green), var(--agro-dark));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .logo-text p {
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        /* NAV */
        .nav-bar {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 12px 25px;
            border-radius: 15px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .nav-btn.primary {
            background: var(--agro-green);
            color: white;
        }
        
        .nav-btn.secondary {
            background: white;
            color: var(--agro-green);
            border: 2px solid var(--agro-green);
        }
        
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* FORM CONTAINER */
        .form-container {
            background: white;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }
        
        .form-header {
            background: linear-gradient(90deg, var(--agro-green), var(--agro-dark));
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .form-header h2 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .form-header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        /* FORM */
        .form-content {
            padding: 40px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            color: var(--agro-dark);
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .required::after {
            content: " *";
            color: #e74c3c;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 18px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1rem;
            transition: all 0.3s;
            background: #f8f9fa;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--agro-green);
            background: white;
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.2);
        }
        
        textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        /* CROP SELECTION */
        .crop-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }
        
        .crop-option {
            text-align: center;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }
        
        .crop-option:hover {
            border-color: var(--agro-green);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .crop-option.selected {
            border-color: var(--agro-green);
            background: #e8f5e9;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(39, 174, 96, 0.2);
        }
        
        .crop-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .crop-name {
            font-weight: 600;
            color: var(--agro-dark);
        }
        
        /* MAP PREVIEW */
        .map-preview-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 10px;
            border: 2px dashed #bdc3c7;
        }
        
        .map-preview {
            height: 200px;
            background: linear-gradient(135deg, #d5f4e6, #c1e1c1);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .grid-lines {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px);
            background-size: 30px 30px;
        }
        
        .parcel-outline {
            position: absolute;
            top: 20%;
            left: 20%;
            width: 60%;
            height: 60%;
            border: 3px solid var(--agro-green);
            border-radius: 15px;
            background: rgba(39, 174, 96, 0.1);
        }
        
        .coordinates {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
        }
        
        .coordinate {
            text-align: center;
        }
        
        /* FORM ACTIONS */
        .form-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #f0f0f0;
        }
        
        .form-btn {
            padding: 18px 40px;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 200px;
            justify-content: center;
        }
        
        .form-btn.submit {
            background: linear-gradient(90deg, var(--agro-green), var(--agro-dark));
            color: white;
        }
        
        .form-btn.reset {
            background: white;
            color: var(--agro-dark);
            border: 2px solid var(--agro-green);
        }
        
        .form-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        /* MESSAGES */
        .message {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            display: none;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .message.success {
            background: #e8f5e9;
            color: var(--agro-green);
            border: 2px solid #c8e6c9;
        }
        
        .message.error {
            background: #ffebee;
            color: #e74c3c;
            border: 2px solid #ffcdd2;
        }
        
        /* FOOTER */
        .footer {
            text-align: center;
            padding: 30px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        /* ANIMATIONS */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .animate-form {
            animation: slideIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header animate-form">
            <div class="logo">
                <i class="fas fa-map-marked-alt logo-icon"></i>
                <div class="logo-text">
                    <h1>SmartAgroMap</h1>
                    <p>Cartographie intelligente pour l'agriculture</p>
                </div>
            </div>
            
            <div class="nav-bar">
                <a href="index.html" class="nav-btn secondary">
                    <i class="fas fa-arrow-left"></i>
                    Retour au dashboard
                </a>
                <a href="add.html" class="nav-btn primary">
                    <i class="fas fa-plus-circle"></i>
                    Nouvelle parcelle
                </a>
            </div>
        </div>

        <!-- MESSAGES -->
        <div id="successMessage" class="message success">
            <i class="fas fa-check-circle"></i>
            ‚úÖ Parcelle ajout√©e avec succ√®s ! Redirection vers le dashboard...
        </div>
        
        <div id="errorMessage" class="message error">
            <i class="fas fa-exclamation-circle"></i>
            ‚ö†Ô∏è Veuillez remplir tous les champs obligatoires (*)
        </div>

        <!-- FORM -->
        <div class="form-container animate-form">
            <div class="form-header">
                <h2><i class="fas fa-map-pin"></i> Ajouter une nouvelle parcelle</h2>
                <p>Cartographiez votre terrain pour un suivi optimal</p>
            </div>
            
            <div class="form-content">
                <form id="parcelleForm">
                    <div class="form-grid">
                        <!-- NOM ET LOCALISATION -->
                        <div class="form-group">
                            <label for="nom" class="required">Nom de la parcelle</label>
                            <input type="text" id="nom" placeholder="Ex: Champ Familial Nord" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="localisation" class="required">Localisation</label>
                            <input type="text" id="localisation" placeholder="Ex: Ndioum, Podor" required>
                        </div>
                        
                        <!-- TYPE DE CULTURE -->
                        <div class="form-group full-width">
                            <label class="required">Type de culture</label>
                            <div class="crop-selection">
                                <div class="crop-option" data-crop="arachide">
                                    <div class="crop-icon">ü•ú</div>
                                    <div class="crop-name">Arachide</div>
                                </div>
                                <div class="crop-option" data-crop="mil">
                                    <div class="crop-icon">üåæ</div>
                                    <div class="crop-name">Mil</div>
                                </div>
                                <div class="crop-option" data-crop="mais">
                                    <div class="crop-icon">üåΩ</div>
                                    <div class="crop-name">Ma√Øs</div>
                                </div>
                                <div class="crop-option" data-crop="riz">
                                    <div class="crop-icon">üåæ</div>
                                    <div class="crop-name">Riz</div>
                                </div>
                                <div class="crop-option" data-crop="autre">
                                    <div class="crop-icon">üå±</div>
                                    <div class="crop-name">Autre</div>
                                </div>
                            </div>
                            <input type="hidden" id="culture" required>
                        </div>
                        
                        <!-- SUPERFICIE ET DATE -->
                        <div class="form-group">
                            <label for="superficie" class="required">Superficie (hectares)</label>
                            <input type="number" id="superficie" step="0.1" min="0.1" max="100" placeholder="Ex: 2.5" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="date_semis" class="required">Date de semis</label>
                            <input type="date" id="date_semis" required>
                        </div>
                        
                        <!-- INDICATEURS -->
                        <div class="form-group">
                            <label for="humidite" class="required">Humidit√© du sol (%)</label>
                            <input type="number" id="humidite" min="0" max="100" placeholder="Ex: 45" required>
                            <small style="color: #7f8c8d; display: block; margin-top: 5px;">Recommand√©: 40-70%</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="ndvi" class="required">Index NDVI (%)</label>
                            <input type="number" id="ndvi" min="0" max="100" placeholder="Ex: 72" required>
                            <small style="color: #7f8c8d; display: block; margin-top: 5px;">Sant√© v√©g√©tale (0-100%)</small>
                        </div>
                        
                        <!-- CARTE -->
                        <div class="form-group full-width">
                            <label>Visualisation de la parcelle</label>
                            <div class="map-preview-container">
                                <div class="map-preview">
                                    <div class="grid-lines"></div>
                                    <div class="parcel-outline"></div>
                                </div>
                                <div class="coordinates">
                                    <div class="coordinate">
                                        <strong>Lat:</strong> 14.6928¬∞ N
                                    </div>
                                    <div class="coordinate">
                                        <strong>Long:</strong> 17.4467¬∞ W
                                    </div>
                                    <div class="coordinate">
                                        <strong>Altitude:</strong> 42m
                                    </div>
                                </div>
                            </div>
                            <small style="color: #7f8c8d; display: block; margin-top: 10px;">
                                <i class="fas fa-info-circle"></i>
                                Repr√©sentation sch√©matique de votre parcelle sur la carte
                            </small>
                        </div>
                        
                        <!-- NOTES -->
                        <div class="form-group full-width">
                            <label for="notes">Notes et observations</label>
                            <textarea id="notes" placeholder="Observations particuli√®res, historique du terrain, particularit√©s..."></textarea>
                        </div>
                    </div>
                    
                    <!-- ACTIONS -->
                    <div class="form-actions">
                        <button type="button" class="form-btn reset" id="btnReset">
                            <i class="fas fa-redo"></i>
                            R√©initialiser
                        </button>
                        <button type="submit" class="form-btn submit">
                            <i class="fas fa-save"></i>
                            Enregistrer la parcelle
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- FOOTER -->
        <div class="footer">
            <p>¬© 2024 SmartAgroMap | Solution de cartographie agricole intelligente</p>
            <p>Contact: contact@smartagromap.sn | +221 33 123 45 67</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üó∫Ô∏è Formulaire SmartAgroMap initialis√©');
            
            // Date par d√©faut = aujourd'hui
            document.getElementById('date_semis').value = new Date().toISOString().split('T')[0];
            
            // S√©lection des cultures
            const cropOptions = document.querySelectorAll('.crop-option');
            const cultureInput = document.getElementById('culture');
            
            cropOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Retirer la s√©lection
                    cropOptions.forEach(opt => opt.classList.remove('selected'));
                    
                    // Ajouter la s√©lection
                    this.classList.add('selected');
                    cultureInput.value = this.getAttribute('data-crop');
                    
                    // Animation
                    this.style.transform = 'scale(1.05)';
                    setTimeout(() => this.style.transform = '', 300);
                });
            });
            
            // S√©lection par d√©faut
            cropOptions[0].click();
            
            // Gestion du formulaire
            const form = document.getElementById('parcelleForm');
            const resetBtn = document.getElementById('btnReset');
            const successMsg = document.getElementById('successMessage');
            const errorMsg = document.getElementById('errorMessage');
            
            // Soumission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (validateForm()) {
                    // Simuler l'envoi
                    successMsg.style.display = 'block';
                    errorMsg.style.display = 'none';
                    
                    // Animation de succ√®s
                    successMsg.style.animation = 'slideIn 0.5s ease-out';
                    
                    // Redirection apr√®s 3 secondes
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 3000);
                } else {
                    errorMsg.style.display = 'block';
                    successMsg.style.display = 'none';
                    errorMsg.style.animation = 'slideIn 0.5s ease-out';
                }
            });
            
            // R√©initialisation
            resetBtn.addEventListener('click', function() {
                if (confirm("Voulez-vous vraiment effacer tous les champs ?")) {
                    form.reset();
                    cropOptions[0].click();
                    document.getElementById('date_semis').value = new Date().toISOString().split('T')[0];
                    successMsg.style.display = 'none';
                    errorMsg.style.display = 'none';
                    
                    // Animation de r√©initialisation
                    form.style.opacity = '0.7';
                    setTimeout(() => form.style.opacity = '1', 300);
                }
            });
            
            // Validation
            function validateForm() {
                let isValid = true;
                const requiredFields = document.querySelectorAll('[required]');
                
                requiredFields.forEach(field => {
                    field.style.borderColor = '';
                    
                    if (!field.value.trim()) {
                        field.style.borderColor = '#e74c3c';
                        isValid = false;
                    }
                });
                
                // Validation sp√©cifique
                const superficie = document.getElementById('superficie');
                const humidite = document.getElementById('humidite');
                const ndvi = document.getElementById('ndvi');
                
                if (superficie.value < 0.1 || superficie.value > 100) {
                    superficie.style.borderColor = '#e74c3c';
                    isValid = false;
                }
                
                if (humidite.value < 0 || humidite.value > 100) {
                    humidite.style.borderColor = '#e74c3c';
                    isValid = false;
                }
                
                if (ndvi.value < 0 || ndvi.value > 100) {
                    ndvi.style.borderColor = '#e74c3c';
                    isValid = false;
                }
                
                return isValid;
            }
            
            // Validation en temps r√©el
            const fields = document.querySelectorAll('input, textarea, select');
            fields.forEach(field => {
                field.addEventListener('input', function() {
                    this.style.borderColor = '';
                    errorMsg.style.display = 'none';
                });
            });
        });
    </script>
</body>
</html>
